/* ============================== bajl.js ============================== */
/**
 *    @fileoverview
 *       bAJL base script.
 *
 *    @version 2.9.20120221
 *    @requires jquery.js
 */

(function(b){var a=this;a.undefined=a.undefined;b.easing.def="easeOutCubic";a.BAJL=b.extend(a.BAJL,new (function(){var f=document;var g=f.documentElement;var e=f.implementation;var c=navigator.userAgent;this.jQuery=b;this.settings={};this.settings.common={showGeometry:false};this.ns={};this.ns.defaultNS=(!g)?"":g.namespaceURI||g.tagUrn||"";this.ns.xhtml1="http://www.w3.org/1999/xhtml";this.ns.xhtml2="http://www.w3.org/2002/06/xhtml2";this.ns.bajl="http://www.b-architects.com/";this.ua={};this.ua.versionText=b.browser.version;this.ua.version=parseFloat(b.browser.version);this.ua.isGecko=!!b.browser.mozilla;this.ua.isSafari=!!b.browser.safari;this.ua.isWebkit=!!b.browser.webkit;this.ua.isWebKit=!!b.browser.webkit;this.ua.isOpera=!!b.browser.opera;this.ua.isIE=!!b.browser.msie;this.ua.isWin=/Win/.test(c);this.ua.isMac=/Mac/.test(c);this.ua.isiPhone=/iPhone/.test(c);this.ua.isiPad=/iPad/.test(c);this.ua.isiPod=/iPod/.test(c);this.ua.isiOS=/iPhone|iPad|iPod/.test(c);this.ua.isAndroid=/Android/.test(c);this.ua.isWinPhone=/Windows Phone/.test(c);this.ua.isMobile=this.ua.isiOS||this.ua.isAndroid||this.ua.isWinPhone||/Mobile/.test(c);this.ua.mobiVersText=this.ua.isiOS?c.replace(/^.+ CPU (iPhone |)OS ([\d_]+).+$/,"$2").replace(/_/g,"."):this.ua.isAndroid?c.replace(/^.+ Android ([\d\.]+).+$/,"$1"):this.ua.isWinPhone?c.replace(/^.+ Windows Phone (OS |)([\d\.]+).+$/,"$2"):"0";this.ua.mobiVersion=parseFloat(this.ua.mobiVersText);this.ua.isQuirksMode=f.compatMode=="BackCompat"||this.ua.isIE&&this.ua.version<6;this.ua.documentMode=!this.ua.isIE?0:f.documentMode?f.documentMode:!this.ua.isQuirksMode?this.ua.version:5;this.ua.isDOMReady=(e)?e.hasFeature("HTML","1.0"):(this.ua.isIE&&g);this.geom={};this.env={};this.env.isOnline=/^https?\:$/.test(location.protocol);this.env.isDOMReady=false}));if(typeof a.Node=="undefined"){a.Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}if(typeof a.console!="object"){a.console={element:null,firebug:"0",userObjects:{},assert:function(){},clear:function(){},count:function(){},debug:function(){},dir:function(){},dirxml:function(){},error:function(){},getFirebugElement:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},log:function(){},notifyFirebug:function(){},profile:function(){},profileEnd:function(){},time:function(){},timeEnd:function(){},trace:function(){},warn:function(){}}}(function(){if(BAJL.ua.isIE){try{document.execCommand("BackgroundImageCache",false,true)}catch(c){}}b(function(){BAJL.env.isDOMReady=true;new BAJL.Timeout(function(){b(document.body).addClass("bajl-enabled")},1)})})();if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,d){if(typeof d!="number"){d=0}else{if(d<0){d=this.length+d}}for(var c=d,f=this.length;c<f;c++){if(this[c]===e){return c}}return -1}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(e,d){if(typeof d!="number"){d=this.length-1}else{if(d<0){d=this.length+d}}for(var c=d;c>=0;c--){if(this[c]===e){return c}}return -1}}if(!Array.prototype.forEach){Array.prototype.forEach=function(c,d){for(var e=0,f=this.length;e<f;e++){c.call(d,this[e],e,this)}}}if(!Array.prototype.map){Array.prototype.map=function(c,d){var e=[];for(var f=0,g=this.length;f<g;f++){e.push(c.call(d,this[f],f,this))}return e}}if(!Array.prototype.filter){Array.prototype.filter=function(c,d){var e=[];for(var f=0,g=this.length;f<g;f++){if(c.call(d,this[f],f,this)){e.push(this[f])}}return e}}if(!Array.prototype.some){Array.prototype.some=function(c,d){for(var e=0,f=this.length;e<f;e++){if(c.call(d,this[e],e,this)){return true}}return false}}if(!Array.prototype.every){Array.prototype.every=function(c,d){for(var e=0,f=this.length;e<f;e++){if(!c.call(d,this[e],e,this)){return false}}return true}}BAJL.Number=function(c){return new BAJL.Number.Wrapper(c)};BAJL.Number.Wrapper=function(c){this.value=Number(c)||0};BAJL.Number.Wrapper.prototype.toString=function(){return String(this.value)};BAJL.Number.Wrapper.prototype.get=function(){return this.value};BAJL.Number.Wrapper.prototype.format=function(l){if(!l||typeof l!="string"){throw new TypeError("BAJL.Number.Wrapper.format: first argument must be a formatting string.")}else{var j=[];var h=parseFloat(this.value)||0;var i=l.split(".")[0].split("");var k=l.split(".")[1]||"";var m=(k)?Math.abs(h):Math.round(Math.abs(h));var d=(h<0)?"-":"";var c=m.toString().split(".")[0].split("");do{var o=c.pop()||"";var g=i.pop()||"";switch(g){case"0":j.push(o?o:"0");break;case"#":j.push(o?o:"");break;case"":c=[];break;default:j.push(g);c.push(o);break}}while(c.length>0||i.length>0);j=j.reverse().join("").replace(/^\D+/,"");if(k){var f=Math.pow(10,k.length);var e=Math.round(m*f)/f;if(e-j==1){j++}var n=e.toString().split(".")[1]||"0";n=n.split("").reverse().join("");k=k.split("").reverse().join("");j=j+"."+BAJL.Number(n).format(k).split("").reverse().join("")}if(BAJL.String(k).startsWith("#")&&BAJL.String(j).endsWith(".0")){j=BAJL.String(j).getBefore(".0")}return BAJL.String(d+j)}};BAJL.String=function(c){return new BAJL.String.Wrapper(c)};BAJL.String.Wrapper=function(c){this.value=String(c===undefined?"":c);this.length=this.value.length};BAJL.String.Wrapper.prototype.toString=function(){return this.value};BAJL.String.Wrapper.prototype.get=BAJL.String.Wrapper.prototype.toString;BAJL.String.Wrapper.prototype.format=function(d,e){var c;if(arguments.length==0){return this}else{if(typeof d=="object"){c=d}else{c=b.makeArray(arguments).map(function(f){return String(f)})}}b.each(c,BAJL.Delegate(function(f,g){this.value=this.value.replace(new RegExp("\\$\\{"+f+"\\}","g"),g)},this));this.length=this.value.length;return this};BAJL.String.Wrapper.prototype.getBefore=function(f,d,e){if(typeof f!="string"){throw new TypeError("BAJL.String.Wrapper.getBefore: first argument must be a string.")}else{if(f){var c=(!e)?this.value.indexOf(f):this.value.lastIndexOf(f);this.value=(c==-1)?"":this.value.substring(0,c)+(d?f:"");this.length=this.value.length}}return this};BAJL.String.Wrapper.prototype.getAfter=function(f,d,e){if(typeof f!="string"){throw new TypeError("String.Wrapper.getAfter: first argument must be a string.")}else{if(f){var c=(!e)?this.value.indexOf(f):this.value.lastIndexOf(f);this.value=(c==-1)?"":(d?f:"")+this.value.substring(c+f.length,this.value.length);this.length=this.value.length}}return this};BAJL.String.Wrapper.prototype.startsWith=function(c){return(this.value.indexOf(c)==0)};BAJL.String.Wrapper.prototype.endsWith=function(d){var c=this.value.lastIndexOf(d);return(c>-1&&c+d.length==this.value.length)};BAJL.String.Wrapper.prototype.rel2abs=function(f){var g=this.value;var c=f.split("/");var e=g.split("/");var d=/^(\/|\w+:)/;if(!f.match(d)){throw new TypeError("BAJL.String.Wrapper.rel2abs: first argument must be an absolute path/URL.")}else{if(g.match(d)){}else{if(g.charAt(0)=="#"||g.charAt(0)=="?"){this.value=f+g}else{if(e[0]=="."||e[0]==".."){this.value=BAJL.String(e.slice(1,e.length).join("/")).rel2abs(c.slice(0,c.length-e[0].length).join("/")+"/").get()}else{this.value=c.slice(0,c.length-1).join("/")+"/"+g}}}}this.length=this.value.length;return this};BAJL.String.Wrapper.prototype.abs2rel=function(f){var c=/^(\/|\w+:)/;if(!f.match(c)){throw new TypeError("BAJL.String.Wrapper.abs2rel: first argument must be an absolute path/URL.")}else{if(!this.value.match(c)){throw new TypeError("BAJL.String.Wrapper.abs2rel: current string is not an absolute path/URL.")}else{this.value=e(f,this.value).replace(/^\//,"")||f;this.length=this.value.length}}return this;function e(i,j){var g=i.split("/");var h=j.split("/");if(!i){return j}else{if(!j){return d(i)}else{if(g[0]!=h[0]){return d(i)+j}else{return arguments.callee(g.slice(1).join("/"),h.slice(1).join("/"))}}}}function d(g){return g.split("/").slice(1).map(function(){return".."}).join("/")+"/"}};BAJL.String.Wrapper.prototype.sanitize=function(){var d={"&":"&amp;","<":"&lt;",">":"&gt;","\u0022":"&quot;","\u0027":"&apos;"};for(var c in d){this.value=this.value.replace(new RegExp(c,"g"),d[c]);this.length=this.value.length}return this};BAJL.StyleSheets=function(d){var e=document.styleSheets;if(BAJL.ua.isSafari){var f=b("link").filter(function(){return Boolean(this.sheet)});var c="BAJL.StyleSheets.Sheet.disabled";if(f.length>e.length){f.each(function(){b(this).data(c,(b.inArray(this.sheet,e)==-1));this.disabled=true;this.disabled=false});b.each(e,function(){this.disabled=b(this.ownerNode).data(c)})}}if(typeof d=="number"){e=e[d]}else{if(typeof d=="object"&&d.type=="text/css"){e=d}}return new BAJL.StyleSheets.Wrapper(e)};BAJL.StyleSheets.Wrapper=function(c){this.length=0;b.makeArray(c).forEach(function(e,d){this[d]=e;this.length++},this)};BAJL.StyleSheets.Wrapper.prototype.eq=function(c){var d=(typeof c=="number")?this[c]:null;return new this.constructor(d)};BAJL.StyleSheets.Wrapper.prototype.get=function(c){return(typeof c=="number")?this[c]:Array.prototype.slice.call(this)};BAJL.StyleSheets.Wrapper.prototype.getOwnerNode=function(c){if(typeof c=="number"){return this[c].ownerNode||this[c].owingElement}else{return Array.prototype.map.call(this,function(f,d){return this.getOwnerNode(d)},this)}};BAJL.StyleSheets.Wrapper.prototype.size=function(){return this.length};BAJL.StyleSheets.Wrapper.prototype.each=function(c){b.each(this.get(),c);return this};BAJL.StyleSheets.Wrapper.prototype.filter=function(c){return new this.constructor(this.get().filter(function(e,d){return c.call(e,d,e)}))};BAJL.StyleSheets.Wrapper.prototype.insertRule=function(f){var o=/([^\{]+)(\{.+\})/;var j=null;for(var h=0,e=this.size();h<e;h++){var k=this.get(h).href.replace(/^(?:https?|file):\/\/([^/]*).*/,"$1");if(k==""||k==location.host){j=this.get(h);break}}if(!j){return}else{if(!o.test(f)){throw new TypeError("BAJL.StyleSheets.Wrapper.insertRule : first argument must be a style rule text.")}else{var d=(BAJL.ua.isSafari&&BAJL.ua.version<522);if(d||(!j.insertRule&&!j.addRule)){var c=document.createElement("style");c.type="text/css";c.appendChild(document.createTextNode(f));document.getElementsByTagName("head")[0].appendChild(c)}else{if(j.insertRule){var l=j.cssRules?j.cssRules.length:0;j.insertRule(f,l)}else{if(j.addRule){var m=o.exec(f);var g=b.trim(m[1]);var p=b.trim(m[2]);if(BAJL.ua.documentMode>=8){p=p.slice(1,p.length-1)}g.split(",").forEach(function(i){j.addRule(i,p)})}}}return this}}};BAJL.OpenWindow=function(c,i,d,l,n,m){if(typeof c!="string"||!c){throw new URIError("BAJL.OpenWindow: first argument must be a string (url).")}else{var h=arguments.callee;var i=(typeof i=="string"&&i)?i:"_blank";var k=h.getPreset(i);var n=k.options||h.parseOptions(n);var m=k.moveFlag||Boolean(m);n.width=k.width||d||n.width||undefined;n.height=k.height||l||n.height||undefined;if(!(n.width>0)){delete n.width}if(!(n.height>0)){delete n.height}var g=[];for(var j in n){g.push(j+"="+n[j])}var f=a.open(c,i,g.join(","));try{f.focus();if(m){f.moveTo(0,0)}}catch(e){}if(a.event){a.event.returnValue=false}return f}};BAJL.OpenWindow.presets={};BAJL.OpenWindow.getPreset=function(c){if(typeof c!="string"||!c){return{}}else{return this.presets[c]||{}}};BAJL.OpenWindow.addPreset=function(h,f,c,e,d){if(typeof h!="string"||!h){throw new TypeError("BAJL.OpenWindow,addPreset: first argument (target) must be a string.")}else{var g=this.presets[h]={};var e=this.parseOptions(e);g.width=(f>0)?f:(e.width>0)?e.width:undefined;g.height=(c>0)?c:(e.height>0)?e.height:undefined;g.options=e;g.moveFlag=Boolean(d);delete g.options.width;delete g.options.height;return g}};BAJL.OpenWindow.parseOptions=function(d){if(typeof d!="string"||!d){return{}}else{var c={};d.replace(/\s/g,"").split(",").forEach(function(f){var e=f.split("=");if(e[0]){c[e[0]]=e[1]||""}});return c}};BAJL.OpenWindow.full=function(d,e,c){c=c||"toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,resizable=no";return BAJL.OpenWindow(d,e,screen.availWidth,screen.availHeight,c,true)};BAJL.Observable=function(){this.callbackChains=null;this.callbackIgnoreLevel={}};BAJL.Observable.prototype.doCallback=function(e,g){var f=this.callbackChains;if(!f||!f[e]){return undefined}else{var d;var c=Array.prototype.slice.call(arguments,1);f[e].filter(function(h){var i=this.callbackIgnoreLevel[e]||"none";switch(i){case"preserved":return h.isDisposable;case"disposable":return !h.isDisposable;case"all":return false;case"none":return true;default:return true}},this).forEach(function(h){d=h.apply(null,c)});this.removeDisposableCallback(e);return d}};BAJL.Observable.prototype.addCallback=function(d,f,c,g){if(typeof d!="string"||d==""){throw new TypeError("BAJL.Observable.addCallback: argument 'name' must be a string as callback name.")}else{if(typeof f!="function"){throw new TypeError("BAJL.Observable.addCallback: argument 'func' must be a Function object.")}else{if(!this.callbackChains){this.callbackChains={}}if(!this.callbackChains[d]){this.callbackChains[d]=[]}var e=BAJL.Delegate(f,c);e.isDisposable=(g=="disposable");this.callbackChains[d].push(e)}}return this};BAJL.Observable.prototype.removeCallback=function(d,f,c){var e=this.callbackChains;if(typeof d!="string"||d==""){throw new TypeError("BAJL.Observable.removeCallback: argument 'name' must be a string as callback name.")}else{if(e&&e[d]){if(typeof f!="function"){delete e[d]}else{var g=(typeof c=="object"&&c)?c:a;e[d]=e[d].filter(function(h){return(h.func!==f||h.aThisObject!==g)})}}}return this};BAJL.Observable.prototype.removeDisposableCallback=function(c){var d=this.callbackChains;if(d&&d[c]){d[c]=d[c].filter(function(e){return !e.isDisposable})}return this};BAJL.Observable.prototype.ignoreCallback=function(c,f){var d=this.callbackChains;if(typeof c!="string"||c==""){throw new TypeError("BAJL.Observable.ignoreCallback: argument 'name' must be a string as callback name.")}else{if(d&&d[c]){var e=["all","preserved","disposable","none"];this.callbackIgnoreLevel[c]=(e.indexOf(f)!=-1)?f:"all"}}return this};BAJL.Iterator=function(c,d){this.targets=c;this.keys=[];this.counter=0;this.mode=d||"value";if(arguments.length>0){this.init()}};BAJL.Iterator.prototype.init=function(){if(!this.targets||typeof this.targets!="object"){throw new TypeError("BAJL.Iterator#init: invalid object type.")}else{b.each(this.targets,BAJL.Delegate(function(c){this.keys.push(c)},this))}};BAJL.Iterator.prototype.hasNext=function(){return(this.counter<this.keys.length)};BAJL.Iterator.prototype.next=function(){if(!this.hasNext()){throw new ReferenceError("BAJL.Iterator#next: StopIteration")}else{var c=this.keys[this.counter++];var d=this.targets[c];switch(this.mode){case"key":return c;case"value":return d;case"both":return[c,d];default:return undefined}}};BAJL.Iterator.prototype.iterate=function(f,e,d){if(typeof f!="function"){throw new TypeError("BAJL.Iterator#iterate: first argument must be a function object.")}else{var c=(this.hasNext())?f.apply(d,b.makeArray(this.next())):false;if(c!==false){if(e>0){new BAJL.Timeout(function(){this.iterate(f,e,d)},e,this)}else{this.iterate(f,e,d)}}}};BAJL.Timeout=function(e,d,c){this.timer=0;this.func=b.isFunction(e)?e:new Function;this.ms=Math.max(0,d)||0;this.aThisObject=c||a;this.timerFunc="setTimeout";if(arguments.length){this.init()}};BAJL.Timeout.prototype.init=function(){var c=BAJL.Delegate(this.func,this.aThisObject);var d=a[this.timerFunc];this.timer=(BAJL.ua.isIE)?d(c,this.ms,"JScript"):d(c,this.ms)};BAJL.Timeout.prototype.clear=function(){clearTimeout(this.timer);clearInterval(this.timer)};BAJL.Timeout.prototype.clearTimer=function(){return this.clear.apply(this,arguments)};BAJL.Interval=function(e,d,c){this.timer=0;this.func=e;this.ms=Math.max(0,d)||0;this.aThisObject=c||a;this.timerFunc="setInterval";if(arguments.length){this.init()}};BAJL.Interval.prototype=new BAJL.Timeout;BAJL.Timer=function(){this.startTime=null;this.reset()};BAJL.Timer.prototype.reset=function(){this.startTime=(new Date()).getTime()};BAJL.Timer.prototype.getTime=function(){return(new Date()).getTime()-this.startTime};BAJL.Timer.prototype.getSeconds=function(){return this.getTime()/1000};BAJL.Tag=function(d,c){this.tagName=d;this.attributes=c||{};this.childNodes=[]};BAJL.Tag.prototype.attr=function(c,d){if(typeof c!="string"){throw new TypeError("BAJL.Tag.attr: first argument must be a string (name).")}else{if(d==undefined){return this.attributes[c]||""}else{return(this.attributes[c]=String(d))}}};BAJL.Tag.prototype.append=function(c){if(c==undefined||c==null){throw new TypeError("BAJL.Tag.append: first argument must be a string or a BAJL.Tag instance.")}else{if(c.constructor!=this.constructor){c=String(c)}this.childNodes.push(c)}};BAJL.Tag.prototype.toString=function(f){var h=(f)?"&lt;":"<";var e=(f)?"&gt;":">";var d=h+this.tagName;var j=(this.childNodes.length)?"":null;for(var g=0,k=this.childNodes.length;g<k;g++){j+=this.childNodes[g].toString(f)}for(var c in this.attributes){d+=" "+c+'="'+this.attributes[c]+'"'}d+=(j!=null)?e+j+h+"/"+this.tagName+e:" /"+e;return d};BAJL.SetValue=function(f,d,e){if(typeof f!="string"||!f){throw new TypeError("BAJL.SetValue: first argument type must be string (expr).")}else{if(e!==null){var c=f.split(".");var e=(e===undefined)?a:e;if(c.length==1){return(e[f]=d)}else{var g=c.shift();if(e[g]==undefined){e[g]={}}return arguments.callee(c.join("."),d,e[g])}}}};BAJL.GetValue=function(e,d){if(typeof e!="string"||!e){throw new TypeError("BAJL.GetValue: first argument type must be string (expr).")}else{var d=b.type(d)!="object"?a:d;var c=new Function("try { return this."+e+" }catch(e){}");return c.call(d)}};BAJL.Singleton=function(d,c){if(typeof d!="function"){throw new TypeError("BAJL.Singleton: first argument must be a constructor function.")}else{return d.__BAJL_SingleInstance__||(d.__BAJL_SingleInstance__=new d())}};BAJL.Delegate=function(f,d){if(typeof f!="function"){throw new TypeError("BAJL.Delegate: first argument must be a function object.")}else{var c=d||a;var e=function(){return f.apply(c,arguments)};e.func=f;e.aThisObject=c;return e}};BAJL.BarrageShield=function(e,d,c){if(typeof e!="function"){throw new TypeError("BAJL.BarrageShield: first argument must be a function object.")}else{return function(){var f=arguments;var g=Math.max(d,1)||1;clearTimeout(e.__BAJL_BarrageShield_Timer__);e.__BAJL_BarrageShield_Timer__=setTimeout(function(){e.apply(c||a,f)},g)}}};BAJL.AlreadyApplied=function(c){if(typeof c!="function"){throw new TypeError("BAJL.AlreadyApplied: first argument must be a function object.")}else{return c.__BAJL_AlreadyApplied__||!(c.__BAJL_AlreadyApplied__=true)}};BAJL.PreloadImage=function(d){if(typeof d!="string"||!d){throw new TypeError("BAJL.PreloadImage: first argument must be a string (img src).")}else{var c=new Image;c.src=d;return c}};BAJL.GetLinkTarget=function(e,g){var e=b(e).filter("a, area").get(0);var g=g?String(g):"_self";if(e){var d=e.target||"_self";var f=e.hash||"#";var c=e.href.replace(f,"").replace(location.href.split("#")[0],"");if(d==g&&f!="#"&&!c){return b(f)}}return b()};BAJL.GetGeometry=function(k){var n=a;var l=document.documentElement;var m=document.body;var i=BAJL.geom;var o=arguments.callee;var j=(BAJL.ua.isIE&&BAJL.ua.isWin&&BAJL.ua.isQuirksMode);var f=(BAJL.ua.isIE&&BAJL.ua.isMac);var h=(BAJL.ua.isSafari&&BAJL.ua.version<522);i.windowW=n.innerWidth||(f?m.scrollWidth:l.offsetWidth);i.windowH=n.innerHeight||(f?m.scrollHeight:l.offsetHeight);i.pageW=(f)?l.offsetWidth:(j)?m.scrollWidth:l.scrollWidth;i.pageH=(f)?l.offsetHeight:(j)?m.scrollHeight:l.scrollHeight;i.scrollX=n.scrollX||l.scrollLeft||m.scrollLeft||0;i.scrollY=n.scrollY||l.scrollTop||m.scrollTop||0;i.windowX=(!k)?(i.windowX||0):k.clientX-((h)?i.scrollX:0);i.windowY=(!k)?(i.windowY||0):k.clientY-((h)?i.scrollY:0);i.pageX=(!k)?(i.pageX||0):k.clientX+((!h)?i.scrollX:0);i.pageY=(!k)?(i.pageX||0):k.clientY+((!h)?i.scrollY:0);i.zoom=o.getZoomRatio();i.scrollBar=o.getScrollBarWidth();if(BAJL.settings.common.showGeometry){var c=[["window","${windowW}x${windowH}"],["page","${pageW}x${pageH}"],["scroll","${scrollX},${scrollY}"],["pos(view)","${windowX},${windowY}"],["pos(abs)","${pageX},${pageY}"],["zoom","${zoom}"],["sbar","${scrollBar}"]].map(function(d){return d.join(": ")}).join(" | ");a.status=BAJL.String(c).format(i).get()}return i};BAJL.GetGeometry.getZoomRatio=function(){var h=document.documentElement;var c=document.body;var e=arguments.callee;e._cache_=e._cache_||1;if(BAJL.ua.isIE&&BAJL.ua.version>=7){if(e._lock_){e._lock_.clear();e._lock_=new BAJL.Timeout(function(){e._lock_=null},500)}else{e._lock_=new BAJL.Timeout(function(){e._lock_=null},500);if(BAJL.ua.isQuirksMode){e._cache_=h.offsetWidth/c.offsetWidth}else{var i="BAJL_GetGeometry_getZoomRatio_TestNode";var f={position:"absolute",left:"0px",top:"0px",width:(h.scrollWidth*10)+"px",height:"10px",background:"red"};var g=b("#"+i).get(0)||b(document.createElement("ins")).attr("id",i).css(f).appendTo(document.body).get(0);b(g).show();e._cache_=h.scrollWidth/g.offsetWidth;b(g).hide()}}}return e._cache_};BAJL.GetGeometry.getScrollBarWidth=function(){var c=arguments.callee;if(typeof c._cache_!="number"){var f="BAJL_GetGeometry_getScrollBarWidth_TestNode";var d={position:"absolute",left:"-10000px",top:"-10000px",display:"block",visibility:"hidden",overflow:"scroll",width:"100px",height:"100px",border:"none",margin:"0",padding:"0"};var e=b("#"+f).get(0)||b(document.createElement("ins")).attr("id",f).css(d).appendTo(document.body).get(0);c._cache_=e.offsetWidth-e.clientWidth;b(e).remove()}return c._cache_};BAJL.GetGeometry.continuously=function(){if(!BAJL.AlreadyApplied(arguments.callee)){BAJL.GetGeometry();b(document).mousemove(BAJL.GetGeometry)}};BAJL.GetCommonDir=function(k){if(typeof k!="string"||!k){throw new TypeError("BAJL.GetCommonDir: first argument must be a string (directory name to find).")}else{var l="./";var c=document.getElementsByTagName("head")[0].getElementsByTagName("script");for(var f=0,e=c.length;f<e;f++){var g=c[f].src.split("/");var j=g.indexOf(k);if(j!=-1){l=g.slice(0,j+1).join("/")+"/";break}}if(!l.match(":")){var d=document.getElementsByTagName("base")[0];var h=(d)?d.href:location.href;if(BAJL.String(l).startsWith("/")){l=h.match(/^\w+:\/*[^\/]+/)[0]+l}else{l=BAJL.String(l).rel2abs(h).get()}}return l}};BAJL.WatchFor=function(j,h){var f=arguments;if(b.type(f[1])=="function"||b.type(f[2])=="function"){f.callee.compat.apply(f.callee,f)}var e=b.Deferred();var d=function(){var k=BAJL.GetValue(j);if(k){i.clear();c.clear();e.resolve(k)}};var g=function(){i.clear();e.reject()};var i=new BAJL.Interval(d,100);var c=new BAJL.Timeout(g,Math.max(0,h)||3000);d();return e.promise()};BAJL.WatchFor.compat=function(){var c=arguments;this(c[0],c[3]).done(c[1]||b.noop).fail(c[2]||b.noop)};b.fn.BAJL_ComputedStyle=function(e,d){var e=String(e||"");var d=String(d||"");var c=this.get(0);if(!e||!c){return""}else{return(c.currentStyle||document.defaultView.getComputedStyle(c,d))[e]||""}};b.fn.BAJL_LinkTarget=function(c){return BAJL.GetLinkTarget(this,c)};b.fn.BAJL_NormalizeTextNode=function(c){this.contents().each(function(){if(this.nodeType==Node.TEXT_NODE){if((this.nodeValue=b.trim(this.nodeValue))==""){this.parentNode.removeChild(this)}}else{if(c&&this.nodeType==Node.ELEMENT_NODE){b(this).BAJL_NormalizeTextNode(c)}}});return this};b.fn.BAJL_SelectEventAssist=function(d){d=Math.max(d,0)||100;return this.filter("select").keyup(c).mousewheel(c);function c(){var e=b(this);var f="BAJL.SelectEventAssist.trigger";e.data(f)||e.data(f,BAJL.BarrageShield(function(g){g.trigger("change")},d));e.data(f)(e)}};b.fn.BAJL_HasElement=function(){return(this.size()>0&&this.get(0)&&this.get(0).nodeType==Node.ELEMENT_NODE)};b.fn.BAJL_AddBeforeUnload=function(d,c){if(this.get(0)===a){if(a.addEventListener){a.addEventListener("beforeunload",BAJL.Delegate(d,c),false)}else{this.bind("beforeunload",function(f){if(f&&f.originalEvent){d.call(c,f.originalEvent)}})}}return this}})(jQuery);



/* ============================== bajl.scroller.js ============================== */
/** 
 *    @fileoverview
 *       Smooth Scroller
 *
 *    @version 2.9.20120221
 *    @requires jquery.js
 *    @requires jquery.easing.js     (optional)
 *    @requires jquery.mousewheel.js (optional)
 *    @requires bajl.js
 */
 
(function(a){BAJL.settings.PageScroller={enabled:true,offsetX:0,offsetY:0,duration:1000,easing:"easeInOutCubic",ignore:"bajl-pagescroller-ignore",onStart:function(b,d,c){},onScroll:function(b,d,c){},onAbort:function(b,d,c){},onComplete:function(b,e,d){var c=BAJL.ua;if(d&&(c.isGecko||c.isIE||(c.isWebkit&&c.version>522))){location.href=d.href}}};a(function(){if(BAJL.settings.PageScroller.enabled){BAJL.PageScroller.init()}else{delete BAJL.PageScroller}});BAJL.Scroller=function(c,b,g,d,f,e){this.node=a(c).get(0);this.offsetX=Number(b)||0;this.offsetY=Number(g)||0;this.duration=(Number(d)>=0)?Number(d):1000;this.easing=(a.easing[f])?f:"swing";this.destination={left:0,top:0};this.useSmartAbort=a.type(e)=="boolean"?e:true;this.animeTimer=null;if(BAJL.env.isDOMReady){this.init()}};BAJL.Scroller.prototype=new BAJL.Observable;BAJL.Scroller.prototype.init=function(){if(!this.node||this.node.nodeType!=Node.ELEMENT_NODE){throw new ReferenceError("BAJL.Scroller.init: scrolling element is not found.")}else{var b=(a(this.node).is("html, body"))?a(document):a(this.node);this.destination={left:this.node.scrollLeft,top:this.node.scrollTop};b.mousewheel||(b.mousewheel=a.noop);var c=a.proxy(function(){this.useSmartAbort&&this.abort()},this);b.click(c).mousewheel(c);return this}};BAJL.Scroller.prototype.scrollTo=function(j,i,h){if(isNaN(j)||isNaN(i)){throw new TypeError("BAJL.Scroller.scrollTo: all arguments must be numbers.")}else{var k=1;var c=Math.max(0,this.node.scrollWidth-this.node.clientWidth);var b=Math.max(0,this.node.scrollHeight-this.node.clientHeight);h=(Number(h)>=0)?Number(h):this.duration;var f=(BAJL.ua.isWebkit&&a(this.node).is("html"))?a(document.body):a(this.node);var e={scrollLeft:f.scrollLeft(),scrollTop:f.scrollTop()};var g={scrollLeft:Math.min(c,Math.max(0,Math.round((j+this.offsetX)*k))),scrollTop:Math.min(b,Math.max(0,Math.round((i+this.offsetY)*k)))};var l={duration:h,easing:this.easing,step:a.proxy(this.step,this),complete:a.proxy(this.complete,this)};if(e.scrollLeft!=g.scrollLeft||e.scrollTop!=g.scrollTop){this.destination={left:g.scrollLeft,top:g.scrollTop};this.abort();this.doCallbackByName("onStart");if(!BAJL.ua.isMobile||!f.is("body")){f.animate(g,l)}else{var d=new BAJL.Timer;this.animeTimer=new BAJL.Interval(function(){var p=d.getTime();var n=a.easing[l.easing];var m=n(null,p,e.scrollLeft,g.scrollLeft-e.scrollLeft,h);var o=n(null,p,e.scrollTop,g.scrollTop-e.scrollTop,h);window.scrollTo(m,o);if(h<=p){window.scrollTo(g.scrollLeft,g.scrollTop);l.complete();this.animeTimer.clear()}},16,this)}}}return this};BAJL.Scroller.prototype.scrollBy=function(b,e,d){b=Number(b)||0;e=Number(e)||0;if(b!=0||e!=0){var c=(BAJL.ua.isWebkit&&a(this.node).is("html"))?a(document.body):a(this.node);this.scrollTo(c.scrollLeft()+b,c.scrollTop()+e,d)}return this};BAJL.Scroller.prototype.scrollToNode=function(f,g){var e=a(this.node);var c=a(f);if(c.parents().filter(function(){return(this==e.get(0))}).get(0)){var b=e.is("html, body")?{left:0,top:0}:e.offset();var d=e.is("html, body")?{left:0,top:0}:{left:e.scrollLeft(),top:e.scrollTop()};var h=c.offset();this.scrollTo(h.left+d.left-b.left+(BAJL.ua.isWebkit?4:0),h.top+d.top-b.top,g)}return this};BAJL.Scroller.prototype.scrollPos=function(){switch(arguments.length){case 0:return{left:this.node.scrollLeft,top:this.node.scrollTop};case 1:throw new ReferenceError("BAJL.Scroller#scrollPos: 2 arguments are required in setter mode.");case 2:this.scrollTo(arguments[0],arguments[1],0);default:return this}};BAJL.Scroller.prototype.step=function(){this.doCallbackByName("onScroll")};BAJL.Scroller.prototype.complete=function(){var b=(BAJL.ua.isWebkit&&a(this.node).is("html"))?a(document.body):a(this.node);if(b.is(":animated")||this.animeTimer){this.doCallbackByName("onComplete")}};BAJL.Scroller.prototype.abort=function(){var b=(BAJL.ua.isWebkit&&a(this.node).is("html"))?a(document.body):a(this.node);if(b.is(":animated")){b.stop();this.doCallbackByName("onAbort")}if(this.animeTimer){this.animeTimer.clear();this.animeTimer=null;this.doCallbackByName("onAbort")}return this};BAJL.Scroller.prototype.smartAbort=function(b){if(arguments.length==0){return this.useSmartAbort}else{this.useSmartAbort=Boolean(b);return this}};BAJL.Scroller.prototype.doCallbackByName=function(b){this.doCallback(b,this.node.scrollLeft,this.node.scrollTop,this.destination.left,this.destination.top)};BAJL.PageScroller={};BAJL.PageScroller.init=function(){if(BAJL.AlreadyApplied(arguments.callee)){return}var d=BAJL.settings.PageScroller;var c=BAJL.ua.isQuirksMode?document.body:document.documentElement;var b=new BAJL.Scroller(c,d.offsetX,d.offsetY,d.duration,d.easing);var f=null;a(document).click(function(i){var h=a(i.target).closest("a, area").filter(function(){var k=a(this).hasClass(d.ignore);var j=a(this).attr("target");return(!k&&(!j||j=="_self"))});var g=h.BAJL_LinkTarget();if(g.size()!=0){i.preventDefault();i.stopPropagation();h.blur();b.scrollToNode(g);f=h.get(0)}});var e=function(h,g){return function(i,j){if(typeof h=="function"){h(i,j,f)}if(g){f=null}}};b.addCallback("onStart",e(d.onStart,false));b.addCallback("onScroll",e(d.onScroll,false));b.addCallback("onAbort",e(d.onAbort,true));b.addCallback("onComplete",e(d.onComplete,true));return(BAJL.PageScroller=b)}})(BAJL.jQuery);


